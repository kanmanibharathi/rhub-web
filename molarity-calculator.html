<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>One Research Hub - BioChem Calculator</title>
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-edu-meeting.css">
    <style>
        .calc-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: 100%;
            transition: transform 0.3s, border-color 0.3s;
        }

        .calc-card:hover {
            transform: translateY(-5px);
            border-color: #00a651;
        }

        .calc-card h4 {
            color: #00a651;
            font-size: 18px;
            margin-bottom: 25px;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            color: #ccc;
            font-size: 13px;
            margin-bottom: 5px;
            display: block;
        }

        .calc-input-group {
            display: flex;
            gap: 10px;
        }

        .calc-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            padding: 8px 15px;
            font-size: 14px;
        }

        .calc-select {
            width: 120px;
            background: #333;
            /* Dark Gray */
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            padding: 8px;
            font-size: 13px;
            cursor: pointer;
            outline: none;
        }

        .calc-select option {
            background: #333;
            color: #fff;
        }

        .calc-btn {
            width: 100%;
            background: #d63384;
            border: none;
            padding: 12px;
            border-radius: 10px;
            color: #fff;
            font-weight: 600;
            margin-top: 15px;
            transition: background 0.3s;
        }

        .calc-btn:hover {
            background: #00a651;
        }

        .result-box {
            background: rgba(0, 166, 81, 0.1);
            border: 1px solid rgba(0, 166, 81, 0.3);
            border-radius: 10px;
            padding: 10px;
            margin-top: 15px;
            text-align: center;
            display: none;
        }

        .result-value {
            font-size: 18px;
            font-weight: 700;
            color: #00a651;
        }
    </style>
</head>

<body>
    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <a href="index.html" class="logo">
                            <img src="assets/images/logo.png" alt="Research Hub Logo">
                            <div class="logo-text">
                                <span class="title">Research Hub</span>
                                <span class="tagline">Where Research Meets Expertise</span>
                            </div>
                        </a>
                        <ul class="nav">
                            <li><a href="index.html">Home</a></li>
                            <li><a href="events.html">Events</a></li>
                            <li><a href="book-slot.html">Book Now</a></li>
                            <li class="has-sub">
                                <a href="javascript:void(0)">Pages</a>
                                <ul class="sub-menu">
                                    <li><a href="events.html">Events</a></li>
                                    <li><a href="products.html">Products</a></li>
                                    <li><a href="courses.html">Courses</a></li>
                                    <li><a href="team.html">Meet Our Team</a></li>
                                    <li><a href="https://www.youtube.com/@Research-Hub" target="_blank"
                                            style="color: #FF0000 !important; font-weight: bold;">YouTube</a></li>
                                </ul>
                            </li>
                            <li class="has-sub">
                                <a href="javascript:void(0)" class="active">Statistics</a>
                                <ul class="sub-menu">
                                    <li><a href="lab-calculations.html">Lab Calculations</a></li>
                                    <li><a href="buffer-recipes.html">Buffer Recipes</a></li>
                                    <li><a href="buffer-recipes.html?id=tris-hcl">Tris Calculator</a></li>
                                    <li><a href="buffer-recipes.html?id=borate">Borate Calculator</a></li>
                                    <li><a href="https://researchhub.shinyapps.io/onewayanova/" target="_blank">Data
                                            Analysis</a></li>
                                </ul>
                            </li>
                            <li><a href="index.html#contact">Contact Us</a></li>
                            <li class="user-profile">
                                <a href="javascript:void(0)" id="user-menu-toggle">
                                    <i class="fa fa-user"></i>
                                </a>
                                <div class="user-dropdown" id="user-dropdown">
                                    <a href="javascript:void(0)" id="show-login">Login</a>
                                    <a href="javascript:void(0)" id="show-signup">Sign Up</a>
                                </div>
                            </li>
                        </ul>
                        <a class='menu-trigger'><span>Menu</span></a>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <style>
        .sidebar-nav {
            position: sticky;
            top: 170px;
        }

        .nav-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #fff;
        }

        .nav-box i {
            width: 35px;
            height: 35px;
            background: rgba(0, 166, 81, 0.1);
            color: #00a651;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .nav-box span {
            font-size: 14px;
            font-weight: 600;
        }

        .nav-box:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
            border-color: rgba(0, 166, 81, 0.3);
        }

        .nav-box.active {
            background: rgba(0, 166, 81, 0.15);
            border-color: #00a651;
        }

        .nav-box.active i {
            background: #00a651;
            color: #fff;
        }

        @media (max-width: 991px) {
            .sidebar-nav {
                position: relative;
                top: 0;
                margin-bottom: 30px;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }

            .nav-box {
                margin-bottom: 0;
                padding: 10px;
                flex-direction: column;
                text-align: center;
            }

            .nav-box span {
                font-size: 12px;
            }
        }

        @media (max-width: 575px) {
            .sidebar-nav {
                grid-template-columns: 1fr;
            }
        }

        .calc-section {
            transition: opacity 0.4s ease;
        }

        .back-to-lab {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: #fff;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 10px 18px;
            border-radius: 10px;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .back-to-lab:hover {
            background: #00a651;
            color: #fff;
            border-color: #00a651;
            transform: translateY(-2px);
        }

        .back-to-lab i {
            font-size: 16px;
        }
    </style>

    <section class="meetings-page" id="meetings"
        style="padding-top: 150px; min-height: 100vh; display: flex; flex-direction: column;">
        <div class="container" style="flex: 1;">
            <div class="row">
                <div class="col-lg-12">
                    <a href="lab-calculations.html" class="back-to-lab">
                        <i class="fa fa-home"></i>
                        <span>Back to Lab Calculations</span>
                    </a>
                </div>
                <div class="col-lg-12 text-center mb-5">
                    <div class="section-heading">
                        <h2>BioChem Calculator</h2>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-3">
                    <div class="sidebar-nav">
                        <div class="nav-box active" onclick="showCalculator('moles-grams', this)">
                            <i class="fa fa-exchange"></i>
                            <span>Moles ⇄ Grams</span>
                        </div>
                        <div class="nav-box" onclick="showCalculator('molarity', this)">
                            <i class="fa fa-flask"></i>
                            <span>Molarity Calculator</span>
                        </div>
                        <div class="nav-box" onclick="showCalculator('dilution', this)">
                            <i class="fa fa-tint"></i>
                            <span>Dilution (C1V1 = C2V2)</span>
                        </div>
                        <div class="nav-box" onclick="showCalculator('unit-calc', this)">
                            <i class="fa fa-calculator"></i>
                            <span>Unit Activity</span>
                        </div>
                    </div>
                </div>

                <div class="col-lg-9">
                    <!-- Calc Category 0: Moles and Grams -->
                    <div id="section-moles-grams" class="calc-section">
                        <div class="row">
                            <div class="col-lg-12 text-center mb-4">
                                <h3 style="color: #fff; font-weight: 700;">Convert between moles and grams</h3>
                            </div>
                        </div>
                        <div class="row g-4 mb-5">
                            <!-- Calc 0a: Moles from grams -->
                            <div class="col-md-6">
                                <div class="calc-card">
                                    <h4>Moles from grams</h4>
                                    <div class="form-group">
                                        <label class="form-label">Mass</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="m0_mass" class="calc-input" placeholder="Value">
                                            <select id="m0_mass_unit" class="calc-select">
                                                <option value="1000">kilograms</option>
                                                <option value="1">grams</option>
                                                <option value="0.001">milligrams</option>
                                                <option value="0.000001">micrograms</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Formula Weight (daltons)</label>
                                        <input type="number" id="m0_fw" class="calc-input" placeholder="e.g. 180.16">
                                    </div>
                                    <button class="calc-btn" onclick="calcMolesFromMass()"
                                        style="background: #ff6600;">Moles
                                        =</button>
                                    <div id="m0_result" class="result-box">
                                        Moles = <span class="result-value"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Calc 0b: Grams from moles -->
                            <div class="col-md-6">
                                <div class="calc-card">
                                    <h4>Grams from moles</h4>
                                    <div class="form-group">
                                        <label class="form-label">Moles</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="m1_moles" class="calc-input" placeholder="Value">
                                            <select id="m1_moles_unit" class="calc-select">
                                                <option value="1">moles</option>
                                                <option value="0.001">millimoles</option>
                                                <option value="0.000001">micromoles</option>
                                                <option value="1e-9">nanomoles</option>
                                                <option value="1e-12">picomoles</option>
                                                <option value="1e-15">femtomoles</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Formula Weight (daltons)</label>
                                        <input type="number" id="m1_fw" class="calc-input" placeholder="e.g. 180.16">
                                    </div>
                                    <button class="calc-btn" onclick="calcMassFromMoles()"
                                        style="background: #ff6600;">Grams
                                        =</button>
                                    <div id="m1_result" class="result-box">
                                        Mass = <span class="result-value"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calc Category 1: Molarity -->
                    <div id="section-molarity" class="calc-section" style="display: none;">
                        <div class="row mt-4">
                            <div class="col-lg-12 text-center mb-4">
                                <h3 style="color: #fff; font-weight: 700;">Molarity Calculator</h3>
                            </div>
                        </div>
                        <div class="row g-4">
                            <!-- Calc 1: Mass from volume & concentration -->
                            <div class="col-md-6">
                                <div class="calc-card">
                                    <h4>Mass from volume & concentration</h4>
                                    <div class="form-group">
                                        <label class="form-label">Concentration</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="c1_conc" class="calc-input" placeholder="Value">
                                            <select id="c1_conc_unit" class="calc-select">
                                                <option value="1">Molar (M)</option>
                                                <option value="0.001">Millimolar (mM)</option>
                                                <option value="0.000001">Micromolar (&micro;M)</option>
                                                <option value="0.000000001">Nanomolar (nM)</option>
                                                <option value="0.000000000001">Picomolar (pM)</option>
                                                <option value="0.000000000000001">Femtomolar (fM)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Formula Weight (daltons)</label>
                                        <input type="number" id="c1_fw" class="calc-input" placeholder="e.g. 180.16">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Volume</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="c1_vol" class="calc-input" placeholder="Value">
                                            <select id="c1_vol_unit" class="calc-select">
                                                <option value="1">Liter (L)</option>
                                                <option value="0.001">Milliliter (mL)</option>
                                                <option value="0.000001">Microliter (&micro;L)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <button class="calc-btn" onclick="calcMass()">Calculate Mass</button>
                                    <div id="c1_result" class="result-box">
                                        Mass = <span class="result-value"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Calc 2: Volume from mass & concentration -->
                            <div class="col-md-6">
                                <div class="calc-card">
                                    <h4>Volume from mass & concentration</h4>
                                    <div class="form-group">
                                        <label class="form-label">Mass</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="c2_mass" class="calc-input" placeholder="Value">
                                            <select id="c2_mass_unit" class="calc-select">
                                                <option value="1000">Kilograms (kg)</option>
                                                <option value="1">Grams (g)</option>
                                                <option value="0.001">Milligrams (mg)</option>
                                                <option value="0.000001">Micrograms (&micro;g)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Formula Weight (daltons)</label>
                                        <input type="number" id="c2_fw" class="calc-input" placeholder="e.g. 180.16">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Concentration</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="c2_conc" class="calc-input" placeholder="Value">
                                            <select id="c2_conc_unit" class="calc-select">
                                                <option value="1">Molar</option>
                                                <option value="0.001">Millimolar</option>
                                                <option value="0.000001">Micromolar</option>
                                            </select>
                                        </div>
                                    </div>
                                    <button class="calc-btn" onclick="calcVolume()">Calculate Volume</button>
                                    <div id="c2_result" class="result-box">
                                        Volume = <span class="result-value"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Calc 3: Molarity from mass & volume -->
                            <div class="col-md-6">
                                <div class="calc-card">
                                    <h4>Molarity from mass & volume</h4>
                                    <div class="form-group">
                                        <label class="form-label">Mass</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="c3_mass" class="calc-input" placeholder="Value">
                                            <select id="c3_mass_unit" class="calc-select">
                                                <option value="1">Grams</option>
                                                <option value="0.001">Milligrams</option>
                                                <option value="0.000001">Micrograms</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Formula Weight (daltons)</label>
                                        <input type="number" id="c3_fw" class="calc-input" placeholder="e.g. 180.16">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Volume</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="c3_vol" class="calc-input" placeholder="Value">
                                            <select id="c3_vol_unit" class="calc-select">
                                                <option value="1">Liter</option>
                                                <option value="0.001">Milliliter</option>
                                                <option value="0.000001">Microliter</option>
                                            </select>
                                        </div>
                                    </div>
                                    <button class="calc-btn" onclick="calcMolarity()">Calculate Molarity</button>
                                    <div id="c3_result" class="result-box">
                                        Molarity = <span class="result-value"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calc Category 2: Dilution -->
                    <div id="section-dilution" class="calc-section" style="display: none;">
                        <div class="row mt-4">
                            <div class="col-lg-12 text-center mb-4">
                                <h3 style="color: #fff; font-weight: 700;">Dilution Calculator</h3>
                            </div>
                        </div>
                        <div class="row justify-content-center">
                            <div class="col-md-10">
                                <div class="calc-card">
                                    <h4>Dilute a stock solution (C1V1 = C2V2)</h4>
                                    <div class="form-group">
                                        <label class="form-label">Stock concentration (C1)</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="c4_c1" class="calc-input" placeholder="Value">
                                            <select id="c4_c1_unit" class="calc-select">
                                                <option value="1">Molar</option>
                                                <option value="0.001">Millimolar</option>
                                                <option value="0.000001">Micromolar</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Desired concentration (C2)</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="c4_c2" class="calc-input" placeholder="Value">
                                            <select id="c4_c2_unit" class="calc-select">
                                                <option value="1">Molar</option>
                                                <option value="0.001">Millimolar</option>
                                                <option value="0.000001">Micromolar</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Desired volume (V2)</label>
                                        <div class="calc-input-group">
                                            <input type="number" id="c4_v2" class="calc-input" placeholder="Value">
                                            <select id="c4_v2_unit" class="calc-select">
                                                <option value="1">Liter</option>
                                                <option value="0.001">Milliliter</option>
                                                <option value="0.000001">Microliter</option>
                                            </select>
                                        </div>
                                    </div>
                                    <button class="calc-btn" onclick="calcDilution()">Calculate Required Volume
                                        (V1)</button>
                                    <div id="c4_result" class="result-box">
                                        Required Volume = <span class="result-value"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-12">
                                <div id="molarity_instruction_box" class="result-box"
                                    style="text-align: left; padding: 20px; display: none; margin: 0 auto; background: rgba(0, 166, 81, 0.1); border: 1px solid rgba(0, 166, 81, 0.3);">
                                    <div id="molarity_instruction_text"
                                        style="font-size: 14px; color: #ccc; font-style: italic; line-height: 1.6;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calc Category 3: Unit calculator -->
                    <div id="section-unit-calc" class="calc-section" style="display: none;">
                        <div class="row mt-5">
                            <div class="col-lg-12 text-center mb-4">
                                <h3 style="color: #fff; font-weight: 700;">Unit calculator</h3>
                            </div>
                        </div>
                        <div class="row g-4">
                            <div class="col-lg-12">
                                <div class="calc-card" style="max-width: 900px; margin: 0 auto;">
                                    <h4 class="text-center">Units per volum (C = A &times; m / V)</h4>

                                    <div class="row align-items-center mb-3">
                                        <div class="col-md-4"><label class="form-label mb-0">Activity (units per
                                                mass)</label>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="calc-input-group">
                                                <input type="number" id="upv_a" class="calc-input"
                                                    placeholder="Activity">
                                                <select id="upv_a_unit_u" class="calc-select" style="width: 80px;">
                                                    <option value="1e-15">fU</option>
                                                    <option value="1e-12">pU</option>
                                                    <option value="1e-9">nU</option>
                                                    <option value="1e-6">&micro;U</option>
                                                    <option value="1e-3">mU</option>
                                                    <option value="1" selected>U</option>
                                                </select>
                                                <span style="color: #ccc; align-self: center;">per</span>
                                                <select id="upv_a_unit_m" class="calc-select" style="width: 80px;">
                                                    <option value="1e-12">pg</option>
                                                    <option value="1e-9">ng</option>
                                                    <option value="1e-6">&micro;g</option>
                                                    <option value="1e-3" selected>mg</option>
                                                    <option value="1">g</option>
                                                    <option value="1000">kg</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-3">
                                        <div class="col-md-4"><label class="form-label mb-0">Mass of solute
                                                (m)</label></div>
                                        <div class="col-md-8">
                                            <div class="calc-input-group">
                                                <input type="number" id="upv_m" class="calc-input" placeholder="Mass">
                                                <select id="upv_m_unit" class="calc-select">
                                                    <option value="1e-12">pg</option>
                                                    <option value="1e-9">ng</option>
                                                    <option value="1e-6">&micro;g</option>
                                                    <option value="0.001">mg</option>
                                                    <option value="1" selected>g</option>
                                                    <option value="1000">kg</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-3">
                                        <div class="col-md-4"><label class="form-label mb-0">Total solution volume
                                                (V)</label>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="calc-input-group">
                                                <input type="number" id="upv_v" class="calc-input" placeholder="Volume">
                                                <select id="upv_v_unit" class="calc-select">
                                                    <option value="1e-15">fL</option>
                                                    <option value="1e-12">pL</option>
                                                    <option value="1e-9">nL</option>
                                                    <option value="1e-6">&micro;L</option>
                                                    <option value="1e-3" selected>mL</option>
                                                    <option value="1">L</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-3">
                                        <div class="col-md-4"><label class="form-label mb-0">Concentration
                                                (C)</label></div>
                                        <div class="col-md-8">
                                            <div class="calc-input-group">
                                                <input type="number" id="upv_c" class="calc-input"
                                                    placeholder="Concentration">
                                                <select id="upv_c_unit_u" class="calc-select" style="width: 80px;">
                                                    <option value="1e-15">fU</option>
                                                    <option value="1e-12">pU</option>
                                                    <option value="1e-9">nU</option>
                                                    <option value="1e-6">&micro;U</option>
                                                    <option value="1e-3">mU</option>
                                                    <option value="1" selected>U</option>
                                                </select>
                                                <span style="color: #ccc; align-self: center;">per</span>
                                                <select id="upv_c_unit_v" class="calc-select" style="width: 80px;">
                                                    <option value="1e-15">fL</option>
                                                    <option value="1e-12">pL</option>
                                                    <option value="1e-9">nL</option>
                                                    <option value="1e-6">&micro;L</option>
                                                    <option value="1e-3" selected>mL</option>
                                                    <option value="1">L</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-4">
                                        <div class="col-md-6 mb-2"><button class="calc-btn"
                                                onclick="calcUPV()">Calculate</button>
                                        </div>
                                        <div class="col-md-6 mb-2"><button class="calc-btn" style="background: #333;"
                                                onclick="clearUPV()">Clear All</button>
                                        </div>
                                    </div>

                                    <div id="upv_result" class="result-box mt-3"
                                        style="text-align: left; padding: 20px;">
                                        <div id="upv_instruction"
                                            style="font-size: 14px; color: #ccc; font-style: italic; line-height: 1.6;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer" style="padding: 20px 0px; background: transparent; margin-top: 50px;">
                <p>Copyright © 2024 One Research Hub. All Rights Reserved.</p>
            </div>
    </section>

    <script>
        function showCalculator(id, el) {
            document.querySelectorAll('.calc-section').forEach(s => s.style.display = 'none');
            const targetSection = document.getElementById('section-' + id);
            if (targetSection) targetSection.style.display = 'block';

            document.querySelectorAll('.nav-box').forEach(b => b.classList.remove('active'));
            if (el) {
                el.classList.add('active');
            } else {
                // Find by onclick attribute if no element passed
                const boxes = document.querySelectorAll('.nav-box');
                boxes.forEach(box => {
                    if (box.getAttribute('onclick').includes(`'${id}'`)) box.classList.add('active');
                });
            }
            // Save state to localStorage
            localStorage.setItem('active_biochem_calc', id);
        }

        // Handle URL parameters and persistence
        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const calcId = urlParams.get('calc') || localStorage.getItem('active_biochem_calc');
            if (calcId) {
                showCalculator(calcId);
            }
        });
    </script>
    <!-- Scripts -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/user-auth.js"></script>

    <script>
        function formatResult(val, type) {
            if (type === 'mass') return val.toFixed(4);
            return val.toFixed(2);
        }

        // Auto-fill logic across calculators
        function syncInputs(values) {
            // values = { conc?: {val, unit}, fw?, vol?: {val, unit}, mass?: {val, unit} }

            // Sync Concentration
            if (values.conc !== undefined) {
                ['c1_conc', 'c2_conc'].forEach(id => {
                    document.getElementById(id + '_unit').value = values.conc.unit;
                    document.getElementById(id).value = (values.conc.val / values.conc.unit).toFixed(2);
                });
            }

            // Sync FW
            if (values.fw !== undefined) {
                ['c1_fw', 'c2_fw', 'c3_fw', 'm0_fw', 'm1_fw'].forEach(id => {
                    document.getElementById(id).value = values.fw;
                });
            }

            // Sync Volume
            if (values.vol !== undefined) {
                ['c1_vol', 'c3_vol'].forEach(id => {
                    document.getElementById(id + '_unit').value = values.vol.unit;
                    document.getElementById(id).value = (values.vol.val / values.vol.unit).toFixed(2);
                });
            }

            // Sync Mass
            if (values.mass !== undefined) {
                ['c2_mass', 'c3_mass'].forEach(id => {
                    document.getElementById(id + '_unit').value = values.mass.unit;
                    document.getElementById(id).value = (values.mass.val / values.mass.unit).toFixed(4);
                });
            }
        }

        // Result formatters
        function getMassDisplay(g) {
            if (g >= 1000) return { val: g / 1000, unit: "kg", unitValue: 1000 };
            if (g >= 1) return { val: g, unit: "g", unitValue: 1 };
            if (g >= 0.001) return { val: g * 1000, unit: "mg", unitValue: 0.001 };
            return { val: g * 1000000, unit: "&micro;g", unitValue: 1e-6 };
        }

        function getVolDisplay(l) {
            if (l >= 1) return { val: l, unit: "L", unitValue: 1 };
            if (l >= 0.001) return { val: l * 1000, unit: "mL", unitValue: 0.001 };
            return { val: l * 1000000, unit: "&micro;L", unitValue: 1e-6 };
        }

        function getMolaDisplay(m) {
            if (m >= 1) return { val: m, unit: "M", unitValue: 1 };
            if (m >= 0.001) return { val: m * 1000, unit: "mM", unitValue: 0.001 };
            if (m >= 1e-6) return { val: m * 1e6, unit: "&micro;M", unitValue: 1e-6 };
            if (m >= 1e-9) return { val: m * 1e9, unit: "nM", unitValue: 1e-9 };
            if (m >= 1e-12) return { val: m * 1e12, unit: "pM", unitValue: 1e-12 };
            return { val: m * 1e15, unit: "fM", unitValue: 1e-15 };
        }

        function getMoleDisplay(mol) {
            if (mol >= 1) return { val: mol, unit: "moles", unitValue: 1 };
            if (mol >= 0.001) return { val: mol * 1000, unit: "millimoles", unitValue: 0.001 };
            if (mol >= 1e-6) return { val: mol * 1e6, unit: "micromoles", unitValue: 1e-6 };
            if (mol >= 1e-9) return { val: mol * 1e9, unit: "nanomoles", unitValue: 1e-9 };
            if (mol >= 1e-12) return { val: mol * 1e12, unit: "picomoles", unitValue: 1e-12 };
            return { val: mol * 1e15, unit: "femtomoles", unitValue: 1e-15 };
        }

        function showMolarityInstruction(text) {
            const box = document.getElementById('molarity_instruction_box');
            const content = document.getElementById('molarity_instruction_text');
            content.innerHTML = `<strong>Preparation Instructions:</strong><br>${text}`;
            box.style.display = 'block';
        }

        function getUnitText(id) {
            const s = document.getElementById(id);
            if (!s) return "";
            return s.options[s.selectedIndex].text;
        }

        // 0a. Moles = Mass / FW
        function calcMolesFromMass() {
            const mu = parseFloat(document.getElementById('m0_mass_unit').value);
            const massG = parseFloat(document.getElementById('m0_mass').value) * mu;
            const fw = parseFloat(document.getElementById('m0_fw').value);

            if (isNaN(massG) || isNaN(fw)) return alert("Please fill all fields");

            const moles = massG / fw;
            const display = getMoleDisplay(moles);

            const res = document.getElementById('m0_result');
            res.style.display = 'block';
            res.querySelector('.result-value').innerHTML = formatResult(display.val, 'conc') + " " + display.unit;

            // Sync FW across calculators
            syncInputs({ fw: fw });
        }

        // 0b. Mass = Moles * FW
        function calcMassFromMoles() {
            const mu = parseFloat(document.getElementById('m1_moles_unit').value);
            const moles = parseFloat(document.getElementById('m1_moles').value) * mu;
            const fw = parseFloat(document.getElementById('m1_fw').value);

            if (isNaN(moles) || isNaN(fw)) return alert("Please fill all fields");

            const massG = moles * fw;
            const display = getMassDisplay(massG);

            const res = document.getElementById('m1_result');
            res.style.display = 'block';
            res.querySelector('.result-value').innerHTML = formatResult(display.val, 'mass') + " " + display.unit;

            // Sync FW and Mass across calculators
            syncInputs({ fw: fw, mass: { val: massG, unit: display.unitValue } });
        }

        // 1. Mass = C * V * FW
        function calcMass() {
            const cu = parseFloat(document.getElementById('c1_conc_unit').value);
            const vu = parseFloat(document.getElementById('c1_vol_unit').value);
            const c = parseFloat(document.getElementById('c1_conc').value) * cu;
            const fw = parseFloat(document.getElementById('c1_fw').value);
            const v = parseFloat(document.getElementById('c1_vol').value) * vu;

            if (isNaN(c) || isNaN(fw) || isNaN(v)) return alert("Please fill all fields");

            const massG = c * v * fw;
            const display = getMassDisplay(massG);

            const res = document.getElementById('c1_result');
            res.style.display = 'block';
            res.querySelector('.result-value').innerHTML = formatResult(display.val, 'mass') + " " + display.unit;

            // Sync others
            syncInputs({
                conc: { val: c, unit: cu },
                fw: fw,
                vol: { val: v, unit: vu },
                mass: { val: massG, unit: display.unitValue }
            });

            showMolarityInstruction(`To prepare a solution with a concentration of <b>${document.getElementById('c1_conc').value} ${getUnitText('c1_conc_unit')}</b>, dissolve <b>${formatResult(display.val, 'mass')} ${display.unit}</b> of solute (Formula Weight: <b>${fw}</b>) in a total solution volume of <b>${document.getElementById('c1_vol').value} ${getUnitText('c1_vol_unit')}</b>.`);
        }

        // 2. Volume = Mass / (C * FW)
        function calcVolume() {
            const mu = parseFloat(document.getElementById('c2_mass_unit').value);
            const cu = parseFloat(document.getElementById('c2_conc_unit').value);
            const m = parseFloat(document.getElementById('c2_mass').value) * mu;
            const fw = parseFloat(document.getElementById('c2_fw').value);
            const c = parseFloat(document.getElementById('c2_conc').value) * cu;

            if (isNaN(m) || isNaN(fw) || isNaN(c)) return alert("Please fill all fields");

            const volL = m / (c * fw);
            const display = getVolDisplay(volL);

            const res = document.getElementById('c2_result');
            res.style.display = 'block';
            res.querySelector('.result-value').innerHTML = formatResult(display.val, 'vol') + " " + display.unit;

            // Sync others
            syncInputs({
                conc: { val: c, unit: cu },
                fw: fw,
                vol: { val: volL, unit: display.unitValue },
                mass: { val: m, unit: mu }
            });

            showMolarityInstruction(`To prepare a solution with a concentration of <b>${document.getElementById('c2_conc').value} ${getUnitText('c2_conc_unit')}</b>, dissolve <b>${document.getElementById('c2_mass').value} ${getUnitText('c2_mass_unit')}</b> of solute (Formula Weight: <b>${fw}</b>) in a total solution volume of <b>${formatResult(display.val, 'vol')} ${display.unit}</b>.`);
        }

        // 3. Molarity = Mass / (V * FW)
        function calcMolarity() {
            const mu = parseFloat(document.getElementById('c3_mass_unit').value);
            const vu = parseFloat(document.getElementById('c3_vol_unit').value);
            const m = parseFloat(document.getElementById('c3_mass').value) * mu;
            const fw = parseFloat(document.getElementById('c3_fw').value);
            const v = parseFloat(document.getElementById('c3_vol').value) * vu;

            if (isNaN(m) || isNaN(fw) || isNaN(v)) return alert("Please fill all fields");

            const molL = m / (v * fw);
            const display = getMolaDisplay(molL);

            const res = document.getElementById('c3_result');
            res.style.display = 'block';
            res.querySelector('.result-value').innerHTML = formatResult(display.val, 'conc') + " " + display.unit;

            // Sync others
            syncInputs({
                conc: { val: molL, unit: display.unitValue },
                fw: fw,
                vol: { val: v, unit: vu },
                mass: { val: m, unit: mu }
            });

            showMolarityInstruction(`To prepare a solution with a concentration of <b>${formatResult(display.val, 'conc')} ${display.unit}</b>, dissolve <b>${document.getElementById('c3_mass').value} ${getUnitText('c3_mass_unit')}</b> of solute (Formula Weight: <b>${fw}</b>) in a total solution volume of <b>${document.getElementById('c3_vol').value} ${getUnitText('c3_vol_unit')}</b>.`);
        }

        function getDilutionVolDisplay(l) {
            if (l >= 1) return { val: l, unit: "L" };
            if (l >= 0.001) return { val: l * 1000, unit: "mL" };
            if (l >= 1e-6) return { val: l * 1e6, unit: "&micro;L" };
            if (l >= 1e-9) return { val: l * 1e9, unit: "nL" };
            return { val: l * 1e12, unit: "pL" };
        }

        // 4. V1 = (C2 * V2) / C1
        function calcDilution() {
            const c1u = parseFloat(document.getElementById('c4_c1_unit').value);
            const c2u = parseFloat(document.getElementById('c4_c2_unit').value);
            const v2u = parseFloat(document.getElementById('c4_v2_unit').value);
            const c1 = parseFloat(document.getElementById('c4_c1').value) * c1u;
            const c2 = parseFloat(document.getElementById('c4_c2').value) * c2u;
            const v2 = parseFloat(document.getElementById('c4_v2').value) * v2u;

            if (isNaN(c1) || isNaN(c2) || isNaN(v2)) return alert("Please fill all fields");

            const v1L = (c2 * v2) / c1;
            const display = getDilutionVolDisplay(v1L);

            const res = document.getElementById('c4_result');
            res.style.display = 'block';
            res.querySelector('.result-value').innerHTML = formatResult(display.val, 'vol') + " " + display.unit;

            showMolarityInstruction(`To prepare a final concentration of <b>${document.getElementById('c4_c2').value} ${getUnitText('c4_c2_unit')}</b>, dilute <b>${formatResult(display.val, 'vol')} ${display.unit}</b> of a <b>${document.getElementById('c4_c1').value} ${getUnitText('c4_c1_unit')}</b> stock solution into a final volume of <b>${document.getElementById('c4_v2').value} ${getUnitText('c4_v2_unit')}</b>.`);
        }

        function clearUPV() {
            ['upv_a', 'upv_m', 'upv_v', 'upv_c'].forEach(id => document.getElementById(id).value = '');
            document.getElementById('upv_result').style.display = 'none';
        }

        function calcUPV() {
            const a_val = parseFloat(document.getElementById('upv_a').value);
            const a_u_base = parseFloat(document.getElementById('upv_a_unit_u').value);
            const a_m_base = parseFloat(document.getElementById('upv_a_unit_m').value);

            const m_val = parseFloat(document.getElementById('upv_m').value);
            const m_base = parseFloat(document.getElementById('upv_m_unit').value);

            const v_val = parseFloat(document.getElementById('upv_v').value);
            const v_base = parseFloat(document.getElementById('upv_v_unit').value);

            const c_val = parseFloat(document.getElementById('upv_c').value);
            const c_u_base = parseFloat(document.getElementById('upv_c_unit_u').value);
            const c_v_base = parseFloat(document.getElementById('upv_c_unit_v').value);

            let filledCount = [a_val, m_val, v_val, c_val].filter(v => !isNaN(v)).length;
            if (filledCount !== 3) return alert("Please fill exactly 3 fields to calculate the missing value.");

            const activityBase = (isNaN(a_val) ? null : a_val * (a_u_base / a_m_base)); // U/g
            const massBase = (isNaN(m_val) ? null : m_val * m_base); // g
            const volBase = (isNaN(v_val) ? null : v_val * v_base); // L
            const concBase = (isNaN(c_val) ? null : c_val * (c_u_base / c_v_base)); // U/L

            let resultVal, targetId, instructionText;
            const resBox = document.getElementById('upv_result');
            const resDisp = document.getElementById('upv_res_val');
            const insDisp = document.getElementById('upv_instruction');

            // C = A * m / V
            if (isNaN(c_val)) {
                const calculatedBase = activityBase * massBase / volBase;
                resultVal = calculatedBase / (c_u_base / c_v_base);
                document.getElementById('upv_c').value = formatResult(resultVal, 'conc');
                targetId = "Concentration";
            } else if (isNaN(a_val)) {
                const calculatedBase = concBase * volBase / massBase;
                resultVal = calculatedBase / (a_u_base / a_m_base);
                document.getElementById('upv_a').value = formatResult(resultVal, 'conc');
                targetId = "Activity";
            } else if (isNaN(m_val)) {
                const calculatedBase = concBase * volBase / activityBase;
                resultVal = calculatedBase / m_base;
                document.getElementById('upv_m').value = formatResult(resultVal, 'mass');
                targetId = "Mass";
            } else if (isNaN(v_val)) {
                const calculatedBase = activityBase * massBase / concBase;
                resultVal = calculatedBase / v_base;
                document.getElementById('upv_v').value = formatResult(resultVal, 'vol');
                targetId = "Volume";
            }

            // Get Final Display Units
            const a_txt = document.activeElement ? "" : ""; // dummy

            const a_u = getUnitText('upv_a_unit_u') + "/" + getUnitText('upv_a_unit_m');
            const m_u = getUnitText('upv_m_unit');
            const v_u = getUnitText('upv_v_unit');
            const c_u = getUnitText('upv_c_unit_u') + "/" + getUnitText('upv_c_unit_v');

            const f_a = document.getElementById('upv_a').value;
            const f_m = document.getElementById('upv_m').value;
            const f_v = document.getElementById('upv_v').value;
            const f_c = document.getElementById('upv_c').value;

            insDisp.innerHTML = `<strong>Preparation Instructions:</strong><br>To prepare a solution with a concentration of <b>${f_c} ${c_u}</b>, dissolve <b>${f_m} ${m_u}</b> of solute (having an activity of <b>${f_a} ${a_u}</b>) in a total solution volume of <b>${f_v} ${v_u}</b>.`;
            resBox.style.display = 'block';
        }
    </script>
</body>

</html>